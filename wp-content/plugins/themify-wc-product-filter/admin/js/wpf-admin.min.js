var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,e,d){a instanceof String&&(a=String(a));for(var b=a.length,c=0;c<b;c++){var f=a[c];if(e.call(d,f,c,a))return{i:c,v:f}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,d){a!=Array.prototype&&a!=Object.prototype&&(a[e]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,e,d,b){if(e){d=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var c=a[b];c in d||(d[c]={});d=d[c]}a=a[a.length-1];b=d[a];e=e(b);e!=b&&null!=e&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6-impl","es3");
(function(a){a(document).ready(function(){a("body").delegate("a.wpf_lightbox","click",function(c){c.preventDefault();c.stopPropagation();var f=a(this);a.ajax({url:this,success:function(g){if(g){var m=f.attr("title"),l=f.data("class"),k=f.data("top");c.preventDefault();a(document).on("keyup",d);var h="wpf_"+Math.random().toString(36).substr(2,9);g='<div id="'+h+'" class="wpf_admin_lightbox wpf_interface"><div class="wpf_lightbox_title">'+m+'</div><a href="#" class="wpf_close_lightbox">\u00d7</a><div id="wpf_lightbox_container"><div class="wpf_lightbox_inner">'+
g+'</div></div></div><div class="wpf_overlay"></div>';a("body").append(g);k||(k=100);l&&a("#"+h).addClass(l);a.event.trigger("WPF.openlightbox",[c,h]);a("#"+h).nextAll(".wpf_overlay").show();a("#"+h).show().css("top",e()).animate({top:k},800);a("#"+h).find(".wpf_close_lightbox").click(b)}}})}).delegate(".wpf_delete","click",function(c){if(confirm(wpf_js.template_delete)){var f=a(this),b=f.closest("table");a.ajax({url:this,dataType:"json",beforeSend:function(){b.addClass("wpf_save")},complete:function(){b.removeClass("wpf_save")},
success:function(a){a&&"1"==a.status&&f.closest("tr").remove()}})}c.preventDefault()}).delegate(".open_media_uploader_image","click",function(c){var b=a(this).closest(".wpf_background_image"),d=wp.media({frame:"post",state:"insert",multiple:!1});d.open();d.on("insert",function(){var a=d.state().get("selection").first().toJSON();b.find("input").val(a.url);b.find("img").attr("src",a.url);b.addClass("has-image")});c.preventDefault()}).delegate(".remove-background","click",function(c){var b=a(this).closest(".wpf_background_image");
1==confirm("Remove background image?")&&(b.find("input").val(""),b.find("img").attr("src",""),b.removeClass("has-image"));c.preventDefault()})});var e=function(){var a=document;return Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))},d=function(a){27===a.keyCode&&(a.preventDefault(),b(a))},b=function(b){b.preventDefault();a(document).off("keyup",d);var c=
a(this).closest(".wpf_admin_lightbox");a.event.trigger("WPF.close_lightbox",this);c.animate({top:e()},800,function(){c.next(".wpf_overlay").remove();c.remove()})}})(jQuery);
function wpf_import(a,e){var d=a.attr("id").replace("plupload-upload-ui",""),b=[],c=a.closest("form"),f=c.find(".wpf_error"),b=JSON.parse(JSON.stringify(e));b.browse_button=d;b.container=a.closest("form").attr("id");b.file_data_name=a.data("name")?a.data("name"):b.file_data_name;b.multipart_params={nonce:"",action:""};a.data("formats")&&(b.filters=a.data("formats"));var g=new plupload.Uploader(b);g.init();g.bind("FilesAdded",function(b,d){if(!a.data("confirm")||confirm(a.data("confirm")))g.settings.multipart_params.action=
c.find('input[name="action"]').val(),g.settings.multipart_params.nonce=c.find('input[name="nonce"]').val(),b.refresh(),b.start(),c.addClass("wpf_save")});g.bind("Error",function(a,b){c.removeClass("wpf_save");b.message&&f.text(b.message)});g.bind("FileUploaded",function(a,b,d){d?(a=JSON.parse(d.response),a.error?(c.removeClass("wpf_save"),f.text(a.error)):a.success&&(setTimeout(function(){c.removeClass("wpf_save")},1500),window.location.reload())):c.removeClass("wpf_save")})};
